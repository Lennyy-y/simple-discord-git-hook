#!/bin/bash

# Get current Git user name and branch
username=$(git config user.name)
branch_name=$(git rev-parse --abbrev-ref HEAD)

# Get timestamp
timestamp=$(date "+%d-%m-%Y %H:%M:%S")

# Your Discord webhook URL
webhook_url="https://discord.com/api/webhooks/YOUR_WEBHOOK_URL_HERE"

# Format the message with timestamp
message="ðŸ’¬ $username committed to the \`$branch_name\` branch at $timestamp."

# Send the webhook depending on OS
if [[ "$OS" == "Windows_NT" ]]; then
  # Windows (Git Bash)
  curl.exe -H "Content-Type: application/json" ^
           -X POST ^
           -d "{\"content\": \"$message\"}" ^
           "$webhook_url"
else
  # macOS / Linux
  curl -H "Content-Type: application/json" \
       -X POST \
       -d "{\"content\": \"$message\"}" \
       "$webhook_url"
fi
